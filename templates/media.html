{% extends "meta.html" %}

{% block title %}
Media Management
{% endblock %}

{% block body %}

<script>
    document.addEventListener('DOMContentLoaded', () => {
        let inputElement = document.getElementById('file-input');
        let filenamElement = document.getElementById('file-name');

        inputElement.addEventListener('change', () => {
            filenamElement.textContent = inputElement.files[0].name;
        })
    });
</script>

<h1>Media</h1>

<form class="form" target="/media" method="post" enctype="multipart/form-data">
    <div class="field">
        <div class="file">
            <label class="file-label">
                <input class="file-input" type="file" id="file-input" name="image" accept="{{allowed_uploads}}">
                <span class="file-cta">
                    <span class="file-label">
                        Choose an imageâ€¦
                    </span>
                </span>
                <span class="file-name" id="file-name">

                </span>
            </label>
        </div>
    </div>



    <div class="field">
        <div class="control">
            <input type="submit" class="button" />
        </div>
    </div>
</form>


<table>
    <tr>
        <th>Filename</th>
        <th>Preview</th>
    </tr>
    {% for file in media %}
    <tr>
        <td><a href="/media/{{file}}">{{file}}</a></td>
        <td><img src="/media/{{file}}" width="80" /></td>
    </tr>
    {% endfor %}
</table>


{% endblock %}